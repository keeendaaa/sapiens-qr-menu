# Анализ сложности добавления пререндеринга (SSR/SSG)

## Текущая архитектура

- **Фреймворк:** React 18 (CSR - Client-Side Rendering)
- **Сборщик:** Vite 6.3.5
- **Деплой:** Статические файлы на nginx
- **Данные:** menu.json загружается как статический JSON импорт

## Варианты реализации

### 1. Static Site Generation (SSG) - Рекомендуется ⭐

**Сложность:** Средняя (3-5 часов работы)

**Что нужно:**
- Добавить плагин для пререндеринга (react-snap, vite-plugin-ssr, или самописный скрипт)
- Настроить сборку для генерации HTML на этапе build
- Адаптировать код для работы в Node.js окружении (если нужно)

**Плюсы:**
- ✅ Быстрая загрузка страницы (HTML уже готов)
- ✅ SEO-friendly (контент в HTML)
- ✅ Можно оставить статический деплой (nginx)
- ✅ Хорошая производительность
- ✅ Минимальные изменения в коде

**Минусы:**
- ⚠️ Нужно обновлять статические файлы при изменении menu.json
- ⚠️ Нет динамического контента

**Варианты реализации:**

#### A) react-snap (Проще всего)
```bash
npm install --save-dev react-snap
```
- Автоматически делает пререндер всех роутов
- Настраивается за 10 минут
- Генерирует статические HTML файлы

#### B) vite-plugin-ssr (Средняя сложность)
- Более гибкий, поддерживает SSR
- Требует больше настройки
- Можно использовать для SSR в будущем

#### C) Самописный скрипт (Средняя сложность)
- Использовать React Server Components или renderToString
- Больше контроля, но больше кода

---

### 2. Server-Side Rendering (SSR) - Полный SSR

**Сложность:** Высокая (1-2 дня работы)

**Что нужно:**
- Настроить Node.js сервер (Express/Fastify)
- Разделить код на client/server bundles
- Настроить hydration
- Изменить деплой процесс
- Настроить nginx как reverse proxy

**Плюсы:**
- ✅ Динамический контент
- ✅ Актуальные данные в реальном времени
- ✅ Лучший SEO

**Минусы:**
- ❌ Требует Node.js сервер
- ❌ Больше сложности в деплое
- ❌ Нужно управлять сервером
- ❌ Больше ресурсов на сервере

**Варианты:**
- Vite SSR режим
- Next.js (но это полная миграция)
- Remix

---

### 3. Hybrid подход (ISR - Incremental Static Regeneration)

**Сложность:** Очень высокая

**Что нужно:**
- Next.js или аналогичный фреймворк
- Полная миграция проекта
- Изменение всей архитектуры

**Плюсы:**
- ✅ Лучшее из обоих миров (SSG + SSR)
- ✅ Автоматическое обновление статики

**Минусы:**
- ❌ Очень много работы
- ❌ Полная переделка проекта

---

## Рекомендация

### Для вашего случая: **Static Site Generation (SSG) с react-snap**

**Почему:**
1. Минимальные изменения в коде
2. Быстрая реализация (2-4 часа)
3. Сохраняется текущий деплой (статические файлы)
4. Отличный результат для SEO
5. Быстрая загрузка страницы

**План реализации:**

1. **Установка react-snap:**
   ```bash
   npm install --save-dev react-snap
   ```

2. **Обновление package.json:**
   ```json
   {
     "scripts": {
       "build": "vite build && react-snap",
       "postbuild": "react-snap"
     },
     "reactSnap": {
       "include": ["/"],
       "skipThirdPartyRequests": true
     }
   }
   ```

3. **Обновление index.html:**
   - Добавить `id="root"` (уже есть)
   - Настроить для react-snap

4. **Тестирование:**
   - Проверить генерацию HTML
   - Проверить работу на сервере

**Оценка времени:** 2-4 часа работы

---

## Альтернатива: vite-plugin-ssr

Если нужно больше контроля или планируется SSR в будущем:

```bash
npm install vite-plugin-ssr
```

**Оценка времени:** 4-8 часов работы

---

## Итого

- **SSG с react-snap:** Средняя сложность, 2-4 часа, рекомендуется
- **SSR с Vite:** Высокая сложность, 1-2 дня, если нужен динамический контент
- **Next.js миграция:** Очень высокая, 3-5 дней, если планируется масштабирование

**Для вашего проекта с меню ресторана SSG - идеальный выбор!**

